### 逻辑与分组

| 语法        |                             说明                             | 表达式实例                 | 可匹配到的字符串实例 |
| :---------- | :----------------------------------------------------------: | -------------------------- | -------------------- |
| \|          | 指明两项之间的一个选择。要匹配 \|，请使用 \|。优先匹配左边的字符，如果都未匹配，则匹配整个串 | 123\|adc                   | 123,abc              |
| (...)       | 括号表示一个分组，从左到右，都有一个正整数编号，遇到‘(’，则自动+1 | a(123\|abc)                | a123,aabc            |
| (?P\<NAME>) |            代表一个分组，处原有编号外，多一个name            | 1(?P\<id>123\|abd)         | 1123,1abc            |
| \\\<number> |               引用编号为\<number>的***分组***                | 1(123\|abc)2\1             | 11232abc,1abc2123    |
| (?P=NAME)   |                     引用名称为NAME的分组                     | a(?P\<ID>123\|abd)b(?P=ID) | a123babc,aabcb123    |



### 特殊构造

| 语法     | 说明                                                         | 表达式实例 | 可匹配到的字符串实例 |
| -------- | ------------------------------------------------------------ | ---------- | -------------------- |
| (?=...)  | 零宽正向先行断言(zero-width positive lookahead assertion)<br>exp1(?=exp2)：查找 exp2 前面的 exp1。 | 1(?=abc)   | 1abc => 1            |
| (?<=...) | 零宽正向后行断言(zero-width positive lookbehind assertion)<br>(?<=exp2)exp1：查找 exp2 后面的 exp1。 | (?<=abc)2  | abc2 => 2            |
| (?!...)  | 零宽负向先行断言(zero-width negative lookahead assertion) <br>exp1(?!exp2)：查找后面不是 exp2 的 exp1。 | 1(?!abc)   | 1bcd => 1            |
| (?<!...) | 零宽负向后行断言(zero-width negative lookbehind assertion)<br>(?<!exp2)exp1：查找前面不是 exp2 的 exp1。 | (?<!abc)2  | bcd2 => 2            |



### 常用正则表达式

##### 匹配一个网络地址（URL）

```
[a-zA-Z]+://[\S]+
```

需要说明的是，网络地址不一定是一个网页地址（http或https链接），还可能是ftp地址等。如果我们要匹配特定协议的网络地址，如http或http链接可以这样写:

```
(https?://)?[\S]+
```

##### 匹配一个IP地址

最简单的写法：

```
(\d+[.]){3}\d+
```

严谨一点的写法：

```
(((?:[1-9]\d?)|(?:1\d{2})|(?:2[0-4]\d)|(?:25[0-5]))[.]){3}((?:[1-9]\d?)|(?:1\d{2})|(?:2[0-4]\d)|(?:25[0-5]))
```

或

```
((([1-9]\d?)|(1\d{2})|(2[0-4]\d)|(25[0-5]))[.]){3}(([1-9]\d?)|(1\d{2})|(2[0-4]\d)|(25[0-5]))
```

##### 匹配一个邮箱地址

最简单的写法：

```
\S+@\S+\.\S+
```

严谨一点的写法（保证只出现一个@符）：

```
[^\s@]+@[^\s@]+\.[^\s@]+
```

如果要非常严谨的话，就要区分不同的邮箱了，因为网易（126邮箱,163邮箱）、qq邮箱、hotmail邮箱以及gmail邮箱对邮箱名称中可以包含的字符都有不同的要求。

匹配网易邮箱：6-18个字符，只能包含字母、数字和下划线，且只能以字母开头

```
[a-zA-Z]\w{5,17}@(126|163)\.com
```

匹配qq邮箱：3-18个字符，只能包含字母、数字、点、减号和下划线

```
[\w.-]{3,18}@qq\.com
```

如果要多个邮箱的严谨匹配用一个正则表达式来匹配，比如要匹配网易邮箱和qq邮箱可以这样写：

```
(?:[a-zA-Z]\w{5,17}@(126|163)\.com)|(?:[\w.-]{3,18}@qq\.com)
```

当然，也可以分别匹配多个正则表达式，再通过程序逻辑来得到最后的结果

##### 匹配密码是否合法：

要求比较简单的情况，比如只要求为非空字符且限定密码长度为6-18位

```
^\S[6-18]$
```

要求比较复杂的情况，比如必须同时包含含数字、大小字母、小写字母和标点符号，这就需要用到前面所说的正则表达式的特殊构造了(?=...), (?!=...)

```
(?=^.{6,8}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W+)
```

如果要求必须同时包含且只能包含数字、大小字母、小写字母和标点符号，可以这样写：

```
(?=^[\d\Wa-zA-Z]{6,8}$)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W+)
```

##### 匹配大陆身份证号码（15位或18位）

```
\d{15}|(\d{18}|(\d{17}[Xx]))
```

> ***小贴士：***  当今的身份证号码有15位和18位之分。1985年我国实行居民身份证制度，当时签发的身份证号码是15位的，1999年签发的身份证由于年份的扩展（由两位变为四位）和末尾加了效验码，就成了18位。这两种身份证号码将在相当长的一段时期内共存。两种身份证号码的含义如下：

##### 匹配日期（年-月-日）

```
(\d{2}|\d{4})-((0?[1-9])|(1[0-2]))-((0?[1-9])|([12][0-9])|(3[01]))
```

##### 24小时制时间（小时:分钟:秒）

```
(((0?|1)[0-9])|(2[0-3])):([0-5][0-9]):([0-5][0-9])
```



| 匹配内容             | 正则表达式                                                   |
| -------------------- | ------------------------------------------------------------ |
| QQ号码               | [1-9]\d{4,}                                                  |
| 中国大陆固定电话号码 | (\d{3,4}-)?\d{7,8}                                           |
| 中国大陆手机号码     | 1\d{10}                                                      |
| 中国大陆邮政编码     | \d{6}                                                        |
| 汉字                 | [\u4e00-\u9fa5]                                              |
| 中文及全角标点符号   | [\u3000-\u301e\ufe10-\ufe19\ufe30-\ufe44\ufe50-\ufe6b\uff01-\uffee] |
| 不含abc的单词        | (?=\w+)(?!abc)                                               |
| 正整数               | [1-9]+                                                       |
| 负整数               | -[1-9]+                                                      |
| 非负整数（正整数+0） | [1-9]+                                                       |
| 非正整数（负整数+0） | -[1-9]+                                                      |
| 整数+0               | -?[1-9]+                                                     |
| 正浮点数             | \d+.\d+                                                      |
| 负浮点数             | -\d+.\d+                                                     |
| 浮点数               | -?\d+.\d+                                                    |